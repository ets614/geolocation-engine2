apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "detection-api.fullname" . }}-config
  labels:
    {{- include "detection-api.labels" . | nindent 4 }}
data:
  tak_server_endpoint: {{ .Values.env.TAK_SERVER_ENDPOINT | quote }}
  accuracy_threshold_green: {{ .Values.env.GEOLOCATION_ACCURACY_THRESHOLD_GREEN | quote }}
  accuracy_threshold_yellow: {{ .Values.env.GEOLOCATION_ACCURACY_THRESHOLD_YELLOW | quote }}
  accuracy_threshold_red: "500"
  detection-thresholds: {{ .Values.configMap.detection-thresholds | quote }}
  application_config: |
    {
      "offline_queue_max_size": {{ .Values.env.OFFLINE_QUEUE_MAX_SIZE }},
      "offline_queue_batch_size": {{ .Values.env.OFFLINE_QUEUE_BATCH_SIZE }},
      "offline_sync_interval_seconds": {{ .Values.env.OFFLINE_SYNC_INTERVAL }},
      "confidence_min_score": 0.5,
      "operator_verification_time_minutes": 5
    }
