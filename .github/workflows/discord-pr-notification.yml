name: Discord PR Notification

on:
  pull_request:
    types: [opened, ready_for_review]

jobs:
  notify-pr:
    name: Send Discord PR Notification
    runs-on: ubuntu-latest
    env:
      WEBHOOK_URL: ${{ secrets.DISCORD_WEBHOOK_URL }}
    steps:
      - name: Send PR notification to Discord
        if: env.WEBHOOK_URL != ''
        run: |
          curl -X POST "$WEBHOOK_URL" \
            -H 'Content-Type: application/json' \
            -d '{
              "embeds": [{
                "title": "ðŸš€ Pull Request Opened",
                "description": "${{ github.event.pull_request.title }}",
                "url": "${{ github.event.pull_request.html_url }}",
                "color": 9437184,
                "fields": [
                  {"name": "PR #", "value": "${{ github.event.pull_request.number }}", "inline": true},
                  {"name": "Author", "value": "${{ github.event.pull_request.user.login }}", "inline": true}
                ]
              }]
            }'
